# 配置文件说明

## 概述

本系统现在支持通过配置文件来设置数据库路径，方便在不同电脑上运行时使用不同的数据库文件。

## 配置文件位置

配置文件位于程序目录下的 `config.json` 文件。

## 配置文件格式

```json
{
    "database_path": "inventory.db",
    "description": "数据库配置文件"
}
```

## 配置说明

### database_path
- **类型**: 字符串
- **说明**: 数据库文件的路径（相对路径或绝对路径）
- **默认值**: "inventory.db"（表示当前目录下的 inventory.db 文件）
- **示例**:
  - `"inventory.db"` - 当前目录下的数据库文件
  - `"../inventory.db"` - 上级目录下的数据库文件
  - `"D:/data/inventory.db"` - 绝对路径指定的数据库文件
  - `"./data/inventory.db"` - 当前目录下的 data 子目录中的数据库文件

## 使用方法

### 1. 在本地使用默认配置
不需要做任何修改，程序会自动使用当前目录下的 `inventory.db` 文件。

### 2. 使用自定义数据库路径
编辑 `config.json` 文件，修改 `database_path` 字段为您想要的路径：

```json
{
    "database_path": "D:/实验室数据/inventory.db",
    "description": "数据库配置文件"
}
```

### 3. 在不同电脑上使用不同路径
- **电脑A**: 使用网络共享数据库
  ```json
  {
      "database_path": "\\\\192.168.1.100\\data\\inventory.db"
  }
  ```

- **电脑B**: 使用本地数据库
  ```json
  {
      "database_path": "inventory.db"
  }
  ```

- **电脑C**: 使用指定目录的数据库
  ```json
  {
      "database_path": "C:\\InventorySystem\\data\\inventory.db"
  }
  ```

## 主界面显示

在主界面底部的状态栏中，会显示：
- 📄 配置文件名
- 数据库文件路径

例如：`📄 配置: config.json | 数据库: inventory.db`

## 注意事项

1. 配置文件使用 UTF-8 编码，确保文件编码正确
2. 路径中的反斜杠需要转义（`\\`）或使用正斜杠（`/`）
3. 如果配置文件不存在或格式错误，程序会使用默认配置（`inventory.db`）
4. 确保对指定的数据库文件路径有读写权限
5. 如果数据库文件不存在，程序会自动创建

## 配置文件示例

### 示例1：本地开发环境
```json
{
    "database_path": "inventory.db",
    "description": "本地开发数据库"
}
```

### 示例2：生产环境（网络共享）
```json
{
    "database_path": "\\\\Server\\InventoryDB\\inventory.db",
    "description": "生产环境共享数据库"
}
```

### 示例3：数据备份目录
```json
{
    "database_path": "D:\\Backup\\inventory_backup.db",
    "description": "数据备份目录"
}
```

## 故障排除

### 问题1：配置文件读取失败
- 检查 `config.json` 文件是否存在
- 检查文件编码是否为 UTF-8
- 检查 JSON 格式是否正确

### 问题2：数据库连接失败
- 检查数据库路径是否正确
- 检查是否有读写权限
- 检查磁盘空间是否充足

### 问题3：多用户访问冲突
- 确保使用支持并发的数据库路径（如网络共享）
- 不要在只读位置创建数据库
- 检查文件权限设置

